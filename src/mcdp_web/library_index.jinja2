<!DOCTYPE html>
<html lang="en">
<head>
    <title>Library {{navigation['current_library']}}</title>
    {% include 'head.jinja2' %}
    
</head>
<body>
{% include 'refresh_shortcut.jinja2' %}

{% include 'model_views_navigation.jinja2' %}
{% set index_doc = navigation['current_library'] + '-index' %}
{% if has_library_doc(index_doc) %}
	{{ render_library_doc(index_doc) | safe }}
{% else %}

<!--<p>Click &#9776; in the upper left and select "new" to add a new model.</p>-->

{% if navigation['documents'] %}
<p> Documents available as part of the <code>{{navigation['current_library']}}</code>
	current library:</p>
<ul>
	{% for d in navigation['documents'] %}
	<li><a href='{{d['url']}}'>{{d['name']}}</a></li>
	{% endfor %}
</ul>
{% endif %}


<style type='text/css'>
	div.compact { display: block; float: left; width: 20em; height: 13em; }
	div.compact { 
		margin: 2em;
		text-align: center;
		border-radius: 8px;
		padding-top: 0.5em;
	}
	div.compact span { margin-bottom: 1em; }
		div.compact:hover {
		box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);    
	}
	div.compact span {display: block; text-align: center; }
	div.compact img { max-width: 20em; max-height: 10em; } 
</style>

<button id='show_previews'>Show previews</button>

<script type='text/javascript'>

	function click_show_previews() {
		// $('.preview').show();
		console.log(all_images);
		for (var i in all_images) {
			x = all_images[i];
			target = x[1];
			src = x[0];

			tmpimg='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==';

			$(target).prop('src',tmpimg);
			$(target).prop('src', src);
		}
	}

	$(document).ready(function() {
		$( "button#show_previews" ).click(click_show_previews);
	});

	var all_images = [];
</script>

{% for m in navigation['models'] %}

<a class='modellink' href="{{m['url']}}">
<div id='{{ m["id_ndp"] }}-div' class="compact">
	<span class="name">	
		{{ m['id_ndp'] }}
	</span>
	
	<img id='{{ m["id_ndp"] }}-image' src='/static/white_small.png'/>

	<script type='text/javascript'>
		tmp_img="/libraries/{{navigation['current_library']}}/models/{{m['id_ndp']}}/views/solver2/compact_graph.png";
		tmp_target = '#{{ m["id_ndp"] }}-image';
		all_images.push([tmp_img, tmp_target]);
		
	function {{ m["id_ndp"] }}_callback() {
		src="/libraries/{{navigation['current_library']}}/models/{{m['id_ndp']}}/views/solver2/compact_graph.png";

		which = '#{{ m["id_ndp"] }}-image';

		$(which).prop('src', src);
	}

	$(document).ready(function() {
		$( '#{{ m["id_ndp"] }}-div' ).hover({{ m["id_ndp"] }}_callback);
	});

	</script>
		        
		<!-- <img class='preview' style='display:none; border: solid 1px red' src="/libraries/{{navigation['current_library']}}/models/{{m['id_ndp']}}/views/solver2/compact_graph.png"/> -->
	
</div>
</a>

{% endfor %}
{%endif%}
  
  
</body>
</html>