<html>

<head>
	<meta content="application/xhtml+xml; charset=utf-8" http-equiv="Content-Type"></meta>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>

<body>

	<!-- <h2>Demo servers</h2>

	<style type='text/css'>
		table,
		body {
			font-family: 'FreeMono', monospace;
			font-size: 10pt;
			font-weight: bold;
		}

		table {}

		table td {
			vertical-align: middle;
			text-align: left;
			padding-left: 0.5em;
		}

		table thead {
			font-style: normal;
			font-weight: bold;
			text-align: center;
		}

		.inactive {
			opacity: 0.3;
		}

		img[src*=status] {
			height: 10pt;
		}

		a {
			text-decoration: none;
		}

		code {
			font-family: 'FreeMono', monospace;
		}
	</style>
	<table id='instances'>
		<thead>
			<tr>
				<td>Server</td>
				<td>Instance</td>
				<td>Access</td>
				<td>Uptime</td>
				<td>Branch name</td>
				<td>Last commit</td>
			</tr>
		</thead>
		<tr>
			<td><a href="https://frankfurt.co-design.science/">Frankfurt&nbsp;ðŸ‡©ðŸ‡ª</td>

			<td>
				<a href='https://demo.co-design.science/inst00/'><code>inst00</code></a>
			</td>
			<td>ðŸŒŽ&nbsp;public</td>

			<td> <img src="https://demo.co-design.science/inst00/status/uptime.png" /> </td>
			<td> <img src="https://demo.co-design.science/inst00/status/branch-name.png" /> </td>
			<td> <img src="https://demo.co-design.science/inst00/status/branch-date.png" /> </td>
			<td>
				<a href="https://circleci.com/gh/AndreaCensi/mcdp/tree/inst00"><img src="https://circleci.com/gh/AndreaCensi/mcdp/tree/inst00.png?style=shield&amp;circle-token=f59172bb200232cffc45e43473c4eaf5c2b3e776" /></a>
			</td>
			<td>
				basic demo
			</td>
		</tr>

		<tr class=inactive>
			<td><a href="https://frankfurt.co-design.science/">Frankfurt&nbsp;ðŸ‡©ðŸ‡ª</td>
			<td>
				<a href='https://demo.co-design.science/inst01/'><code>inst01</code></a>
			</td>
			<td>ðŸ”’&nbsp;closed</td>

			<td> <img src="https://demo.co-design.science/inst01/status/uptime.png" /> </td>
			<td> <img src="https://demo.co-design.science/inst01/status/branch-name.png" /> </td>
			<td> <img src="https://demo.co-design.science/inst01/status/branch-date.png" /> </td>
			<td>
				<a href="https://circleci.com/gh/AndreaCensi/mcdp/tree/inst01"><img src="https://circleci.com/gh/AndreaCensi/mcdp/tree/inst01.png?style=shield&amp;circle-token=f59172bb200232cffc45e43473c4eaf5c2b3e776" /></a>
			</td>
			<td>
				staging
			</td>
		</tr>

		<tr class=inactive>
			<td><a href="https://virginia.co-design.science/">Virginia&nbsp;ðŸ‡ºðŸ‡¸</td>
			<td>
				<a href='https://demo-us.co-design.science/inst02/'><code>inst02</code></a>
			</td>
			<td>ðŸŒŽ&nbsp;public</td>

			<td> <img src="https://demo-us.co-design.science/inst02/status/uptime.png" /> </td>
			<td> <img src="https://demo-us.co-design.science/inst02/status/branch-name.png" /> </td>
			<td> <img src="https://demo-us.co-design.science/inst02/status/branch-date.png" /> </td>
			<td>
				<a href="https://circleci.com/gh/AndreaCensi/mcdp/tree/inst02"><img src="https://circleci.com/gh/AndreaCensi/mcdp/tree/inst02.png?style=shield&amp;circle-token=f59172bb200232cffc45e43473c4eaf5c2b3e776" /></a>
			</td>
			<td>
				staging
			</td>
		</tr>


		<tr class=inactive>
			<td><a href="https://virginia.co-design.science/">Virginia&nbsp;ðŸ‡ºðŸ‡¸</td>
			<td>
				<a href='https://demo-us.co-design.science/inst03/'><code>inst03</code></a>
			</td>
			<td>ðŸ”’&nbsp;closed</td>

			<td> <img src="https://demo-us.co-design.science/inst03/status/uptime.png" /> </td>
			<td> <img src="https://demo-us.co-design.science/inst03/status/branch-name.png" /> </td>
			<td> <img src="https://demo-us.co-design.science/inst03/status/branch-date.png" /> </td>
			<td>
				<a href="https://circleci.com/gh/AndreaCensi/mcdp/tree/inst03"><img src="https://circleci.com/gh/AndreaCensi/mcdp/tree/inst03.png?style=shield&amp;circle-token=f59172bb200232cffc45e43473c4eaf5c2b3e776" /></a>
			</td>
			<td>
				staging
			</td>
		</tr>

		<tr class=inactive>
			<td></td>
			<td>

			</td>
			<td>ðŸ”’&nbsp;closed</td>

			<td> <img src="http://127.0.0.1:8080/status/uptime.png" /> </td>
			<td> <img src="http://127.0.0.1:8080/status/branch-name.png" /> </td>
			<td> <img src="http://127.0.0.1:8080/status/branch-date.png" /> </td>
			<td>
				<a href="https://circleci.com/gh/AndreaCensi/mcdp/tree/inst03"><img src="https://circleci.com/gh/AndreaCensi/mcdp/tree/inst03.png?style=shield&amp;circle-token=f59172bb200232cffc45e43473c4eaf5c2b3e776" /></a>
			</td>
			<td>
				staging
			</td>
		</tr>

	</table>
	</td>
	</tr>
	</table> -->

	<h3>Uptime statistics</h3>

	<a href="http://status.co-design.science/">Service status</a>

	<h3>Unit-tests for branches</h3>
	<table>
		<thead>
			<tr>
				<td></td>
				<td>branch</td>
				<td>unit tests</td>
			</tr>
		</thead>

		<tr>
			<td>Master</td>
			<td><a href="https://github.com/AndreaCensi/mcdp/tree/master">master</a></td>
			<td>
				<a href="https://circleci.com/gh/AndreaCensi/mcdp/tree/master"><img src="https://circleci.com/gh/AndreaCensi/mcdp/tree/master.png?style=shield&amp;circle-token=f59172bb200232cffc45e43473c4eaf5c2b3e776" /></a>
			</td>
		</tr>
		<tr>
			<td>Development</td>
			<td><a href="https://github.com/AndreaCensi/mcdp/tree/devel">devel</a></td>
			<td>
				<a href="https://circleci.com/gh/AndreaCensi/mcdp/tree/devel"><img src="https://circleci.com/gh/AndreaCensi/mcdp/tree/devel.png?style=shield&amp;circle-token=f59172bb200232cffc45e43473c4eaf5c2b3e776" /></a>
			</td>
		</tr>
		<tr>
			<td>Daily</td>
			<td><a href="https://github.com/AndreaCensi/mcdp/tree/last">last</a></td>
			<td>
				<a href="https://circleci.com/gh/AndreaCensi/mcdp/tree/last"><img src="https://circleci.com/gh/AndreaCensi/mcdp/tree/last.png?style=shield&amp;circle-token=f59172bb200232cffc45e43473c4eaf5c2b3e776" /></a>
			</td>
		</tr>
	</table>

	<style>
		thead {
			font-style: italic;
			text-align: center;
		}

		td {
			padding: 5pt;
			vertical-align: top;
		}

		table table td {
			vertical-align: middle;
		}
	</style>

	<table id='destination'>
		<thead>
			<tr id='template'>
				<td id='server-name'>Server</td>
				<td id='server-location'></td>
				<td id='server'>URL</td>
				<td id='uptime'>Uptime</td>
				<td id='branch-name'>Branch</td>
				<td id='branch-date'>Last commit</td>
				<td id='circle'>Unit tests</td>
			</tr>
		</thead>
	</table>

	<script>
		function go(rowid, server) {
			url = server + '/status/status.json';
			rowsel = '#'+rowid;

			function success(data) {
				console.log(data);

				$("#template").clone().appendTo( "#destination").attr('id', rowid).css('visibility', '');
				console.log(rowsel + ' #uptime');
				$(rowsel + ' #uptime').html(data['uptime']);
				$(rowsel + ' #branch-name').html(data['branch-name']);
				$(rowsel + ' #branch-date').html(data['branch-date']);
				$(rowsel + ' #server-location').html(data['server-location']);
				$(rowsel + ' #server-name').html(data['server-name']);

				branch = data['branch-name'];
				circle = '<a href="https://circleci.com/gh/AndreaCensi/mcdp/tree/BRANCH"><img src="https://circleci.com/gh/AndreaCensi/mcdp/tree/BRANCH.png?style=shield&amp;circle-token=f59172bb200232cffc45e43473c4eaf5c2b3e776"/></a>'.replace('BRANCH', branch);

				$(rowsel + ' #circle').html(circle);

				servers = '<a href="S/">S</a>'.replace('S', server).replace('S', server);
				$(rowsel + ' #server').html(servers);
			}

			function error(data) {
				console.log(data);

				$("#template").clone().appendTo( "#destination").attr('id', rowid).css('visibility', '');
				rowsel = '#'+rowid;

				servers = '<a href="S/">S</a>'.replace('S', server).replace('S', server);
				$(rowsel + ' #server').html(servers);

				w = '<span style="color:red">!</span>';
				$(rowsel + ' #circle').html(w);
				$(rowsel + ' #uptime').html(w);
				$(rowsel + ' #branch-name').html(w);
				$(rowsel + ' #branch-date').html(w);
				$(rowsel + ' #server-location').html(w);
				$(rowsel + ' #server-name').html(w);

			}

			$.ajax({
				url: url,
				crossDomain: true,
				dataType: 'jsonp',
				success: success,
				error: error,
				timeout: 1000
			});
		}

		go('row1', 'http://127.0.0.1:8080');
		// go('row2', 'https://demo.co-design.science/inst00');
	</script>
</body>

</html>
